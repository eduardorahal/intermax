
<!--HEADER-->

<h3 class="page-header col-md-3">Representantes</h3>



        <!--ABAS-->


        <ul class="nav nav-tabs col-md-9">
          <li class="active"><a href="#cadastrar_Representante" data-toggle="tab" aria-expanded="false" (click)="limpa()" >Cadastrar</a></li>
          <li class=""><a href="#consultar_Representante" data-toggle="tab" aria-expanded="true" (click)="limpa()">Consultar</a></li>
        </ul>



<!--DIV PRINCIPAL-->


<div id="myTabContent" class="tab-content">



        <!--CADASTRO DE REPRESENTANTE-->


        <div class="tab-pane fade active in" id="cadastrar_Representante">
            <div class="form-group col-md-4">
              <div class="input-group" >
                <label for="">CNPJ</label>
                <input type="text" class="cnpj form-control input-sm" [(ngModel)]="cnpj" name="cnpj" placeholder="CNPJ" />
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="input-group">
                <label for="">Insc. Estadual</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="insc_estadual" name="insc_estadual" placeholder="Inscrição Estadual" />
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="input-group">
                <label for="">Contato</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="contato" name="contato" placeholder="Nome para Contato" />
              </div>
            </div>
            <div class="form-group col-md-12">
              <div class="input-group">
                <label for="">Razão Social</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="razao" name="razao" placeholder="Razão Social" />
              </div>
            </div>
            <div class="form-group col-md-8">
              <div class="input-group">
                <label for="">Endereço</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="endereco" name="endereco" placeholder="Endereço" />
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="input-group">
                <label for="">Bairro</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="bairro" name="bairro" placeholder="Bairro" />
              </div>
            </div>
            <div class="form-group col-md-5">
              <div class="input-group">
                <label for="">Cidade</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="cidade" name="cidade" placeholder="Cidade" />
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="input-group">
                <label for="">UF</label>
                <select class="form-control input-sm" [(ngModel)]="estado" name="estado" id="estado" >
                  <option value="" disabled=true>Selecione o Estado</option> 
                  <option *ngFor="let uf of estados" [value]="uf.value">{{uf.value}}</option>
                </select>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="input-group">
                <label for="">CEP</label>
                <input type="text" class="cep form-control input-sm" [(ngModel)]="cep" name="cep" placeholder="CEP" />
              </div>
            </div>
            <div class="form-group col-md-11">
              <div class="input-group">
                <label for="">Região</label>
                <select class="form-control input-sm" [(ngModel)]="regiao" name="regiao" id="regiao" >
                  <option value="" disabled=true label="Selecione a Região:" ></option> 
                  <option *ngFor="let regiao of regioes; let i = index" [value]="i">{{regiao.nome}}</option>
                </select>
              </div>
            </div>
            <div class="col-md-1">
              <label>Novo</label>
              <button class="btn btn-primary btn-sm btn-block" (click)="adicionaRegiao()"><span class="glyphicon glyphicon-plus-sign"></span></button>
            </div>
            <div class=" col-md-12" *ngIf="regArr.length" >
              <table class="table table-striped table-hover" >
                  <thead>
                    <tr>
                      <th class="col-md-1">ID</th>
                      <th class="col-md-11">Região</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of regArr; let i = index">
                      <td>{{item._id}}</td>
                      <td>{{item.nome}}</td>
                      <td><a style="cursor:pointer;" (click)="removeRegiao(item)" ><span class="glyphicon glyphicon-minus" style="color: red"></span></a></td>
                    </tr>
                </tbody>
              </table>
            </div>
            <div class="form-group col-md-11">
              <div class="input-group">
                <label for="">Categoria</label><br>
                <select class="form-control input-sm" [(ngModel)]="categoria" name="categoria" id="categoria">
                  <option value="" disabled=true>Selecione uma ou mais opções:</option>
                  <option value="Revenda">Revenda</option>
                  <option value="Varejo">Varejo</option>
                  <option value="Engenharia">Engenharia</option>
                  <option value="Homecenter">Home Center</option>
                  <option value="Key Account">Key Account</option>
                  <option value="Distribuidor">Distribuidor</option>
                </select>
              </div>
            </div>
            <div class="col-md-1">
              <label>Novo</label>
              <button class="btn btn-primary btn-sm btn-block" (click)="adicionaCategoria()"><span class="glyphicon glyphicon-plus-sign"></span></button>
            </div>
            <div class=" col-md-12" *ngIf="catArr.length" >
              <table class="table table-striped table-hover" >
                  <thead>
                    <tr>
                      <th class="col-md-1">#</th>
                      <th class="col-md-11">Categoria</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of catArr; let i = index">
                      <td>{{i + 1}}</td>
                      <td>{{item.categoria}}</td>
                      <td><a style="cursor:pointer;" (click)="removeCategoria(item)" ><span class="glyphicon glyphicon-minus" style="color: red"></span></a></td>
                    </tr>
                </tbody>
              </table>
            </div>
            <div class="form-group col-md-4">
              <div class="input-group">
                <label for="">Telefone</label>
                <input type="text" class="phone form-control input-sm" [(ngModel)]="telefone" name="telefone" placeholder="Telefone" />
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="input-group">
                <label for="">Contato</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="contato_tel" name="contato_tel" placeholder="Contato" />
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="input-group">
                <label for="">Operadora</label>
                <input type="text" class="form-control input-sm" [(ngModel)]="operadora" name="operadora" placeholder="Operadora" />
              </div>
            </div>
            <div class="col-md-1">
              <label>Novo</label>
              <button class="btn btn-primary btn-sm btn-block" (click)="adicionaTelefone()"><span class="glyphicon glyphicon-plus-sign"></span></button>
            </div>
            <div class=" col-md-12" *ngIf="telArr.length" >
              <table class="table table-striped table-hover" >
                <thead>
                  <tr>
                    <th class="col-md-1">#</th>
                    <th class="col-md-4">Telefone</th>
                    <th class="col-md-4">Contato</th>
                    <th class="col-md-3">Operadora</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of telArr; let i = index">
                    <td>{{i + 1}}</td>
                    <td class="phone">{{item.telefone}}</td>
                    <td>{{item.contato_tel}}</td>
                    <td>{{item.operadora}}</td>
                    <td><a style="cursor:pointer;" (click)="removeTelefone(item)" ><span class="glyphicon glyphicon-minus" style="color:red"></span></a></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-md-12">
              <input class="btn btn-primary btn-block btn-sm" (click)="adicionaRepresentante()" value="CONFIRMAR">
            </div>
        </div>



        <!--CONSULTA DE REPRESENTANTES-->


        <div class="tab-pane fade" id="consultar_Representante">
          <div class="form-group col-md-2">
            <input type="text" class="form-control input-sm" name="consulta_id" [(ngModel)]="consulta_id" placeholder="ID Representante" (keyup.enter)="consultaRepresentanteID()" />
          </div>
          <div class="form-group col-md-6">
            <input type="text" class="form-control input-sm" [(ngModel)]="consulta_representante" name="consulta_representante" placeholder="CNPJ ou Razão Social" (keyup)="consultaRepresentante()" />
          </div>
          <div class="form-group col-md-4">
            <select class="form-control input-sm" [(ngModel)]="consulta_categoria" name="consulta_categoria">
              <option value="">Categoria</option>
              <option value="Revenda">Revenda</option>
              <option value="Varejo">Varejo</option>
              <option value="Engenharia">Engenharia</option>
              <option value="Home Center">Home Center</option>
              <option value="Key Account">Key Account</option>
              <option value="Distribuidor">Distribuidor</option>
            </select>
          </div>
          <div class="form-group col-md-4">
            <select class="form-control input-sm" [(ngModel)]="consulta_regiao" name="consulta_regiao">
              <option value="" >Região</option>
              <option *ngFor="let regiao of regioes" [value]="regiao._id">{{regiao.nome}}</option>
            </select>
          </div>
          <div class="form-group col-md-4">
            <input type="text" class="form-control input-sm" name="consulta_cidade" [(ngModel)]="consulta_cidade" placeholder="Cidade" />
          </div>
          <div class="form-group col-md-2">
            <select class="form-control input-sm" [(ngModel)]="consulta_estado" name="consulta_estado" >
              <option value="">Estado</option> 
              <option *ngFor="let uf of estados" [value]="uf.value">{{uf.value}}</option> 
            </select>
          </div>
          <div class="form-group col-md-2">
            <button *ngIf="!representantes" class="btn btn-primary btn-sm btn-block" (click)="consultaRepresentanteMulti()"><span class="glyphicon glyphicon-search"></span></button>
            <button *ngIf="representantes" class="btn btn-danger btn-sm btn-block" (click)="limpaBusca()">Nova Consulta</button>
          </div>
          <table class="table table-striped table-hover col-md-12" *ngIf="representantes">
            <thead>
              <tr>
                <th>#</th>
                <th>CNPJ</th>
                <th>Nome</th>
                <th>Local</th>
                <th>Ação</th>
              </tr>
            </thead>
            <tbody *ngFor="let representante of representantes; let i = index" [attr.data-index]="i">
              <tr>
                <td>{{representante._id}}</td>
                <td class="cnpj">{{representante.cnpj}}</td>
                <td>{{representante.razao}}</td>
                <td>{{representante.cidade}}/{{representante.estado}}</td>
                <td><a style="cursor:pointer;" data-title="Visualizar" data-toggle="modal" data-target="#view" title="Visualizar" (click)="infoRepresentante(representante)"><span class="glyphicon glyphicon-info-sign" style="color:blue"></span></a> &nbsp;&nbsp;&nbsp;
                <a style="cursor:pointer;" data-title="Editar" data-toggle="modal" data-target="#edit" title="Editar" (click)="editRepresentante(representante)" ><span class="glyphicon glyphicon-pencil" style="color:green"></span></a> &nbsp;&nbsp;&nbsp;
                <a style="cursor:pointer;" data-title="Remover" data-toggle="modal" data-target="#remove" title="Excluir" ><span class="glyphicon glyphicon-trash" style="color:red"></span></a></td>
              </tr>


            <!--INFO-->
              <div class="modal fade" id="view" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                      <h4 class="modal-title custom_align" id="Heading">Cadastro de Representante</h4>
                    </div>
                    <div class="modal-body" style="overflow-y: auto; height: auto">
                      <div class="col-md-4">
                        <label for="">ID</label>
                        <p>{{info._id}}</p>
                      </div>
                      <div class="col-md-4">
                        <label for="">CNPJ</label>
                        <p class="cnpj">{{info.cnpj}}</p>
                      </div>
                      <div class="col-md-4">
                        <label for="">Insc.Estadual</label>
                        <p>{{info.insc_estadual}}</p>
                      </div>
                      <div class="col-md-12">
                        <label for="">Razão Social</label>
                        <p>{{info.razao}}</p>
                      </div>
                      <div class="col-md-4">
                        <label for="">Contato</label>
                        <p>{{info.contato}}</p>
                      </div>
                      <div class="col-md-4">
                        <label for="">Categoria</label>
                        <p>{{info.categoria}}</p>
                      </div>
                      <div class="col-md-4">
                        <label for="">Região</label>
                        <p>{{info.regiao}}</p>
                      </div>
                      <div>
                        <table class="table table-striped table-hover" >
                          <thead>
                            <tr>
                              <th class="col-md-4">Endereço</th>
                              <th class="col-md-2">Bairro</th>
                              <th class="col-md-2">Cidade</th>
                              <th class="col-md-1">Estado</th>
                              <th class="col-md-2">CEP</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>{{info.endereco}}</td>
                              <td>{{info.bairro}}</td>
                              <td>{{info.cidade}}</td>
                              <td>{{info.estado}}</td>
                              <td class="cep">{{info.cep}}</td>
                              </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <table class="table table-striped table-hover" >
                          <thead>
                            <tr>
                              <th class="col-md-1">#</th>
                              <th class="col-md-4">Telefone</th>
                              <th class="col-md-4">Contato</th>
                              <th class="col-md-3">Operadora</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let item of info.telefones; let i = index">
                              <td>{{i + 1}}</td>
                              <td class="phone">{{item.telefone}}</td>
                              <td>{{item.contato_tel}}</td>
                              <td>{{item.operadora}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <table class="table table-striped table-hover" >
                          <thead>
                            <tr>
                              <th class="col-md-1">#</th>
                              <th class="col-md-11">Região</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let item of info.regioes; let i = index">
                              <td>{{item._id}}</td>
                              <td>{{item.nome}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <table class="table table-striped table-hover" >
                          <thead>
                            <tr>
                              <th class="col-md-1">#</th>
                              <th class="col-md-11">Categoria</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let item of info.categorias; let i = index">
                              <td>{{i + 1}}</td>
                              <td>{{item.categoria}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="modal-footer ">
                      <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"> Sair</span></button>
                    </div>
                  </div>  
                </div>
              </div>



              <!--EDITAR-->
              <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true" >
                <div class="modal-dialog modal-lg">
                  <div class="modal-content" style="overflow: hidden">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                      <h4 class="modal-title custom_align" id="Heading">Editar Cadastro de Representante</h4>
                    </div>
                    <div class="modal-body" style="overflow-y: auto; height: auto">
                      <div>
                      <div class="form-group col-md-4">
                        <div class="input-group" >
                          <label for="">CNPJ</label>
                          <input type="text" class="cnpj form-control input-sm" [(ngModel)]="cnpj" name="cnpj" placeholder="CNPJ" />
                        </div>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="input-group">
                          <label for="">Insc. Estadual</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="insc_estadual" name="insc_estadual" placeholder="Inscrição Estadual" />
                        </div>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="input-group">
                          <label for="">Contato</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="contato" name="contato" placeholder="Nome para Contato" />
                        </div>
                      </div>
                      <div class="form-group col-md-12">
                        <div class="input-group">
                          <label for="">Razão Social</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="razao" name="razao" placeholder="Razão Social" />
                        </div>
                      </div>
                      <div class="form-group col-md-8">
                        <div class="input-group">
                          <label for="">Endereço</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="endereco" name="endereco" placeholder="Endereço" />
                        </div>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="input-group">
                          <label for="">Bairro</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="bairro" name="bairro" placeholder="Bairro" />
                        </div>
                      </div>
                      <div class="form-group col-md-5">
                        <div class="input-group">
                          <label for="">Cidade</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="cidade" name="cidade" placeholder="Cidade" />
                        </div>
                      </div>
                        <div class="form-group col-md-3">
                        <div class="input-group">
                          <label for="">UF</label>
                          <select class="form-control input-sm" [(ngModel)]="estado" name="estado" id="estado" >
                              <option value="" disabled=true>Selecione o Estado</option> 
                              <option *ngFor="let uf of estados" [value]="uf.value">{{uf.value}}</option> 
                            </select>
                        </div>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="input-group">
                          <label for="">CEP</label>
                          <input type="text" class="cep form-control input-sm" [(ngModel)]="cep" name="cep" placeholder="CEP" />
                        </div>
                      </div>
                      <div class="form-group col-md-11">
                        <div class="input-group">
                          <label for="">Região</label>
                          <select class="form-control input-sm" [(ngModel)]="regiaoEdit" name="regiaoEdit" id="regiaoEdit" >
                            <option value="" disabled=true label="Selecione a Região:" ></option> 
                            <option *ngFor="let regiao of regioes; let i = index" [value]="i">{{regiao.nome}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-1">
                        <label>Novo</label>
                        <button class="btn btn-primary btn-sm btn-block" (click)="adicionaRegiaoEdit()"><span class="glyphicon glyphicon-plus-sign"></span></button>
                      </div>
                      <div class=" col-md-12" *ngIf="regArr.length" >
                        <table class="table table-striped table-hover" >
                            <thead>
                              <tr>
                                <th class="col-md-1">ID</th>
                                <th class="col-md-11">Região</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of regArr; let i = index">
                                <td>{{item._id}}</td>
                                <td>{{item.nome}}</td>
                                <td><a style="cursor:pointer;" (click)="removeRegiaoEdit(item)" ><span class="glyphicon glyphicon-minus" style="color: red"></span></a></td>
                              </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="form-group col-md-11">
                        <div class="input-group">
                          <label for="">Categoria</label><br>
                          <select class="form-control input-sm" [(ngModel)]="categoriaEdit" name="categoriaEdit" id="categoriaEdit">
                            <option value="" disabled=true>Selecione uma ou mais opções:</option>
                            <option value="Revenda">Revenda</option>
                            <option value="Varejo">Varejo</option>
                            <option value="Engenharia">Engenharia</option>
                            <option value="Homecenter">Home Center</option>
                            <option value="Key Account">Key Account</option>
                            <option value="Distribuidor">Distribuidor</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-1">
                        <label>Novo</label>
                        <button class="btn btn-primary btn-sm btn-block" (click)="adicionaCategoriaEdit()"><span class="glyphicon glyphicon-plus-sign"></span></button>
                      </div>
                      <div class=" col-md-12" *ngIf="catArr.length" >
                      <table class="table table-striped table-hover" >
                            <thead>
                              <tr>
                                <th class="col-md-1">#</th>
                                <th class="col-md-11">Categoria</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of catArr; let i = index">
                                <td>{{i + 1}}</td>
                                <td>{{item.categoria}}</td>
                                <td><a style="cursor:pointer;" (click)="removeCategoriaEdit(item)" ><span class="glyphicon glyphicon-minus" style="color: red"></span></a></td>
                              </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="input-group">
                          <label for="">Telefone</label>
                          <input type="text" class="phone form-control input-sm" [(ngModel)]="telefone" name="telefone" placeholder="Telefone" />
                        </div>
                      </div>
                      <div class="form-group col-md-4">
                        <div class="input-group">
                          <label for="">Contato</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="contato_tel" name="contato_tel" placeholder="Contato" />
                        </div>
                      </div>
                      <div class="form-group col-md-3">
                        <div class="input-group">
                          <label for="">Operadora</label>
                          <input type="text" class="form-control input-sm" [(ngModel)]="operadora" name="operadora" placeholder="Operadora" />
                        </div>
                      </div>
                      <div class="col-md-1">
                        <label>Novo</label>
                        <button class="btn btn-primary btn-sm btn-block" (click)="adicionaTelefone()"><span class="glyphicon glyphicon-plus-sign"></span></button>
                      </div>
                      <div class=" col-md-12" *ngIf="telArr.length" >
                      <table class="table table-striped table-hover" >
                            <thead>
                              <tr>
                                <th class="col-md-1">#</th>
                                <th class="col-md-4">Telefone</th>
                                <th class="col-md-4">Contato</th>
                                <th class="col-md-3">Operadora</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of telArr; let i = index">
                                <td>{{i + 1}}</td>
                                <td class="phone">{{item.telefone}}</td>
                                <td>{{item.contato_tel}}</td>
                                <td>{{item.operadora}}</td>
                                <td><a style="cursor:pointer;" (click)="removeTelefone(item)" ><span class="glyphicon glyphicon-minus" style="color:red"></span></a></td>
                              </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="col-md-12">
                        <input class="btn btn-primary btn-block btn-sm" (click)="modificaRepresentante()" value="CONFIRMAR">
                      </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              
              
              <!--DELETE-->
              <div class="modal fade" id="remove" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                      <h4 class="modal-title custom_align" id="Heading">Remover Cadastro de Representante</h4>
                    </div>
                    <div class="modal-body">
                      <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Deseja remover este cadastro de representante?</div>
                    </div>
                    <div class="modal-footer ">
                      <button type="button" class="btn btn-success" ><span class="glyphicon glyphicon-ok-sign" (click)="removeRepresentante(representante)"> Sim</span></button>
                      <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"> Não</span></button>
                    </div>
                  </div>
                </div>
              </div>




            </tbody>
          </table>
        </div>



</div>